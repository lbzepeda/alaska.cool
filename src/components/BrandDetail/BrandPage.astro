---
// src/components/BrandPage.astro
import { brandStyles } from "../../styles/brandStyles";
import Breadcrumbs from "../Breadcrumbs.astro";
import Bento from "./Bento.astro";
import Certification from "./Certification.astro";
import FAQ from "./FAQ.astro";
import Hero from "./Hero.astro";
import Product from "./Product.astro";

interface Props {
  brand: {
    name: string;
    logo: string;
    colorBrand: string;
    tagline: string;
    imageBrand: string;
    videoBrand?: string;
    description: string;
    models: {
      id: string;
      name: string;
      voltage: string;
      voltageType: string;
      seer: number;
      area: string;
      recommended: string;
      features: {
        noise: string;
        current: string;
        energyRating: string;
      };
      highlight: string;
      certificate?: string;
    }[];
    certifications?: {
      name: string;
      image: string;
      description: string;
    }[];
    highlights?: {
      title: string;
      value: string;
      description: string;
    }[];
    FAQ: {
      question: string;
      answer: string;
    }[];
  };
  brandKey: "tempBlue" | "rheem" | "comfortStar" | /* "midea" | */ "solerPalau";
}

const { brand, brandKey } = Astro.props;
const styles = brandStyles[brandKey];
---

<main class="bg-white dark:bg-black">
  <Breadcrumbs />
  <Hero brand={brand} brandKey={brandKey} />
  <Bento brand={brand} styles={styles} />
  <Product brand={brand} />
  <FAQ brand={brand} styles={styles} />
  <Certification brand={brand} styles={styles} />
</main>

<!-- Brand and Product Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Brand",
  name: brand.name,
  logo: brand.logo,
  description: brand.description,
  url: `https://alaska-cool.com/${brandKey}`,
  manufacturer: {
    "@type": "Organization", 
    name: brand.name
  },
  slogan: brand.tagline
})} />

<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "ItemList",
  name: `${brand.name} Air Conditioners`,
  description: `Complete catalog of ${brand.name} air conditioning units available in Nicaragua`,
  numberOfItems: brand.models.length,
  itemListElement: brand.models.map((model, index) => ({
    "@type": "ListItem",
    position: index + 1,
    item: {
      "@type": "Product",
      name: `${brand.name} ${model.name}`,
      description: `${model.name} air conditioner with ${model.voltage} voltage and SEER ${model.seer} energy efficiency rating`,
      brand: {
        "@type": "Brand",
        name: brand.name
      },
      category: "Air Conditioner",
      additionalProperty: [
        {
          "@type": "PropertyValue",
          name: "Voltage",
          value: model.voltage
        },
        {
          "@type": "PropertyValue", 
          name: "SEER Rating",
          value: model.seer.toString()
        },
        {
          "@type": "PropertyValue",
          name: "Coverage Area",
          value: model.area
        },
        {
          "@type": "PropertyValue",
          name: "Noise Level", 
          value: model.features.noise
        },
        {
          "@type": "PropertyValue",
          name: "Energy Rating",
          value: model.features.energyRating
        }
      ],
      offers: {
        "@type": "Offer",
        availability: "https://schema.org/InStock",
        itemCondition: "https://schema.org/NewCondition",
        seller: {
          "@type": "Organization",
          name: "Alaska Cool Nicaragua",
          url: "https://alaska-cool.com"
        },
        areaServed: "Nicaragua"
      }
    }
  }))
})} />

<style>
  [data-text="reveal"],
  [data-stats="reveal"],
  [data-features="reveal"],
  [data-products="reveal"],
  [data-certs="reveal"] {
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  }

  [data-image="reveal"] {
    opacity: 0;
    animation: fadeIn 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.2s;
  }

  @keyframes fadeUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }
</style>
